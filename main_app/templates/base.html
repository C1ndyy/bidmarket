{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %} {% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
    {% block css %}{% endblock %}
</head>

<body>
    <div id="sidenav-overlay"></div>
    <nav id="desktop-nav" class="navbar navbar-expand-md navbar-light bg-light">
        <div class="container-fluid d-flex justify-content-between">
            <a class="navbar-brand " href="#">Home</a>
            <div>
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 ">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="{% url 'listings_index' %}">Listings</a>
                    </li>
                    {% if user.is_authenticated %}
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="{% url 'message_index' %}">Messages</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="{% url 'profile' %}">My Profile</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="{% url 'logout' %}">Logout</a>
                    </li>
                    {% else %}
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="{% url 'login' %}">Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="{% url 'signup' %}">Signup</a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <nav id="mobile-nav" class="navbar navbar-expand-sm navbar-light bg-light">
        <div class="d-flex justify-content-between">
            <span id="menu-icon" class="material-icons md-36">
                menu
            </span>
            <a class="navbar-brand" href="#">LOGO</a>
            <span class="material-icons md-36">
                notifications
            </span>
        </div>
    </nav>

    <div id="side-nav">
        <!-- <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a> -->
        {% if user.is_authenticated %}
        <a href="{% url 'listings_index' %}">All Listings</a>
        <a href="{% url 'message_index' %}">Messages</a>
        <a href="{% url 'profile' %}">My Profile</a>
        <a href="{% url 'logout' %}">Logout</a>
        {% else %}
        <a href="{% url 'login' %}">Login</a>
        <a href="{% url 'signup' %}">Signup</a>
        {% endif %}
    </div>

    <main class="container">{% block content %} {% endblock %}</main>

</body>

<script>
    let overlay = document.getElementById("sidenav-overlay")
    let menu = document.getElementById("menu-icon");
    menu.addEventListener("click", function (e) {
        e.stopPropagation();
        if (menu.classList.contains("open")) {
            closeNav();
            menu.classList.toggle("open")
        } else {
            openNav();
            menu.classList.toggle("open")

        }
    })


    document.addEventListener("click", function (e) {
        if (menu.classList.contains("open")) {
            closeNav();
        }
    })


    function openNav() {
        document.getElementById("side-nav").style.width = "250px";
        overlay.style.display = "block"
        document.documentElement.style.overflow = 'hidden';
        document.body.scroll = "no";

    }
    function closeNav() {
        document.getElementById("side-nav").style.width = "0";
        overlay.style.display = "none"
        document.documentElement.style.overflow = 'scroll';
        document.body.scroll = "yes";
    }
</script>

</html>